!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CKEditor5=e():(t.CKEditor5=t.CKEditor5||{},t.CKEditor5.uswds_grid=e())}(self,(()=>(()=>{var t={"ckeditor5/src/core.js":(t,e,s)=>{t.exports=s("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(t,e,s)=>{t.exports=s("dll-reference CKEditor5.dll")("./src/ui.js")},"ckeditor5/src/widget.js":(t,e,s)=>{t.exports=s("dll-reference CKEditor5.dll")("./src/widget.js")},"dll-reference CKEditor5.dll":t=>{"use strict";t.exports=CKEditor5.dll}},e={};function s(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,s),i.exports}s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r={};return(()=>{"use strict";s.d(r,{default:()=>g});var t=s("ckeditor5/src/core.js"),e=s("ckeditor5/src/widget.js");function o(t){return(0,e.isWidget)(t)&&!!t.getCustomProperty("uswdsGrid")}function i(t){const e=t.getSelectedElement();if(e&&o(e))return e;let{parent:s}=t.getFirstPosition();for(;s;){if(s.is("element")&&o(s))return s;s=s.parent}return null}function n(t,e,s){s=s||!1;let r="";if("function"==typeof t.getAttribute?r=t.getAttribute("class"):"string"==typeof t.className&&(r=t.className),!r)return"";const o=r.split(" ").filter((t=>0!==t.lastIndexOf("ck-widget",0)&&0!==t.lastIndexOf("ck-edit",0)&&0!==t.lastIndexOf("uswdsg-",0)&&(s?0===t.lastIndexOf(e,0):0!==t.lastIndexOf(e,0))));return o.length?o.join(" ").trim():""}function a(t){const s={};let r=!1;s.container_wrapper_class=n(t,"uswds_grid");const o=t.getChild(0);if(i=o,(0,e.isWidget)(i)&&i.getCustomProperty("uswdsGridContainer")){s.add_container=1,s.container_class=n(o,"container");const t=n(o,"container",!0);t.length&&(-1!==t.indexOf("container-fluid")?s.container_type="fluid":s.container_type="default"),r=o.getChild(0)}else r=o;var i;const a=n(r,"row");return s.no_gutter=-1!==a.indexOf("no-gutters")?1:0,s.row_class=a.replace("no-gutters","").replace("g-0",""),s.breakpoints={none:{layout:r.getAttribute("data-row-none")},sm:{layout:r.getAttribute("data-row-sm")},md:{layout:r.getAttribute("data-row-md")},lg:{layout:r.getAttribute("data-row-lg")},xl:{layout:r.getAttribute("data-row-xl")},xxl:{layout:r.getAttribute("data-row-xxl")}},s.num_columns=0,Array.from(r.getChildren()).forEach(((t,e)=>{if(function(t){return!!t.getCustomProperty("uswdsGridCol")}(t)){s.num_columns+=1;const r=n(t,"col");s[`col_${e+1}_classes`]=r}})),s}class d extends t.Command{execute(t){const{model:e}=this.editor,s=function(t){const e=t.getSelectedElement();return(s=e)&&s.is("element","uswdsGrid")?e:t.getFirstPosition().findAncestor("uswdsGrid");var s}(e.document.selection);e.change((r=>{s?function(t,e,s){let r=!1,o=!1;const i={class:"uswds_grid"};"undefined"!==s.container_wrapper_class&&(i.class+=` ${s.container_wrapper_class}`),i.class=i.class.trim(),t.setAttributes(i,e);const n=e.getChild(0);var a;(a=n)&&a.is("element","uswdsGridContainer")?(r=n,o=n.getChild(0)):o=n;const d={class:s.row_class.trim(),"data-row-none":s.breakpoints.none?s.breakpoints.none.layout:"","data-row-sm":s.breakpoints.sm?s.breakpoints.sm.layout:"","data-row-md":s.breakpoints.md?s.breakpoints.md.layout:"","data-row-lg":s.breakpoints.lg?s.breakpoints.lg.layout:"","data-row-xl":s.breakpoints.xl?s.breakpoints.xl.layout:"","data-row-xxl":s.breakpoints.xxl?s.breakpoints.xxl.layout:""};t.setAttributes(d,o);for(let e=1;e<=s.num_columns;e++){const r=`col_${e}_classes`;t.setAttributes({class:s[r]},o.getChild(e-1))}if(s.add_container){const i={class:s.container_class.trim()};r?t.setAttributes(i,r):(r=t.createElement("uswdsGridContainer",i),t.append(r,e),t.append(o,r))}else r&&t.unwrap(r)}(r,s,t):e.insertContent(function(t,e){const s={class:"uswds_grid"};"undefined"!==e.container_wrapper_class&&(s.class+=` ${e.container_wrapper_class}`);const r=t.createElement("uswdsGrid",s),o={class:e.row_class.trim(),"data-row-none":e.breakpoints.none?e.breakpoints.none.layout:"","data-row-sm":e.breakpoints.sm?e.breakpoints.sm.layout:"","data-row-md":e.breakpoints.md?e.breakpoints.md.layout:"","data-row-lg":e.breakpoints.lg?e.breakpoints.lg.layout:"","data-row-xl":e.breakpoints.xl?e.breakpoints.xl.layout:"","data-row-xxl":e.breakpoints.xxl?e.breakpoints.xxl.layout:""},i=t.createElement("uswdsGridRow",o);for(let s=1;s<=e.num_columns;s++){const r=`col_${s}_classes`,o=t.createElement("uswdsGridCol",{class:e[r]}),n=t.createElement("paragraph");t.insertText(`Column ${s} content`,n),t.append(n,o),t.append(o,i)}if(e.add_container){const s={class:e.container_class.trim()},o=t.createElement("uswdsGridContainer",s);t.append(o,r),t.append(i,o)}else t.append(i,r);return r}(r,t))}))}refresh(){const{model:t}=this.editor,{selection:e}=t.document,s=t.schema.findAllowedParent(e.getFirstPosition(),"uswdsGrid");this.isEnabled=null!==s}}class l extends t.Plugin{static get requires(){return[e.Widget]}static get pluginName(){return"UswdsGridEditing"}constructor(t){super(t),this.attrs={class:"class","data-row-none":"data-row-none","data-row-sm":"data-row-sm","data-row-md":"data-row-md","data-row-lg":"data-row-lg","data-row-xl":"data-row-xl","data-row-xxl":"data-row-xxl"}}init(){this.editor.config.get("uswdsGrid")&&(this._defineSchema(),this._defineConverters(),this._defineCommands())}_defineSchema(){const{schema:t}=this.editor.model;t.register("uswdsGrid",{allowWhere:"$block",isLimit:!0,isObject:!0,allowAttributes:["class"]}),t.register("uswdsGridContainer",{isLimit:!0,allowIn:"uswdsGrid",isInline:!0,allowAttributes:["class"]}),t.register("uswdsGridRow",{isLimit:!0,allowIn:["uswdsGrid","uswdsGridContainer"],isInline:!0,allowAttributes:Object.keys(this.attrs)}),t.register("uswdsGridCol",{allowIn:"uswdsGridRow",isInline:!0,allowContentOf:"$root",allowAttributes:["class"]})}_defineConverters(){const{conversion:t}=this.editor;t.for("upcast").elementToElement({model:"uswdsGrid",view:{name:"div",classes:"uswds_grid"}}),t.for("downcast").elementToElement({model:"uswdsGrid",view:(t,{writer:s})=>{const r=s.createContainerElement("div");return s.setCustomProperty("uswdsGrid",!0,r),(0,e.toWidget)(r,s,{label:"BS Grid"})}}),t.for("upcast").elementToElement({model:"uswdsGridContainer",view:{name:"div"}}),t.for("downcast").elementToElement({model:"uswdsGridContainer",view:(t,{writer:s})=>{const r=s.createContainerElement("div");return s.setCustomProperty("uswdsGridContainer",!0,r),(0,e.toWidget)(r,s,{label:"BS Grid Container"})}}),t.for("upcast").elementToElement({model:"uswdsGridRow",view:{name:"div",classes:["grid-row"]},converterPriority:"high"}),t.for("downcast").elementToElement({model:"uswdsGridRow",view:(t,{writer:s})=>{const r={"data-row-none":t.getAttribute("data-row-none"),"data-row-sm":t.getAttribute("data-row-sm"),"data-row-md":t.getAttribute("data-row-md"),"data-row-lg":t.getAttribute("data-row-lg"),"data-row-xl":t.getAttribute("data-row-xl"),"data-row-xxl":t.getAttribute("data-row-xxl")},o=s.createContainerElement("div",r);return s.setCustomProperty("uswdsGridRow",!0,o),(0,e.toWidget)(o,s,{label:"USWDS Grid Row"})}}),t.for("upcast").elementToElement({model:"uswdsGridCol",view:{name:"div"}}),t.for("editingDowncast").elementToElement({model:"uswdsGridCol",view:(t,{writer:s})=>{const r=s.createEditableElement("div");return s.setCustomProperty("uswdsGridCol",!0,r),(0,e.toWidgetEditable)(r,s)}}),t.for("dataDowncast").elementToElement({model:"uswdsGridCol",view:{name:"div",classes:""}}),Object.keys(this.attrs).forEach((e=>{const s={model:{key:e,name:"uswdsGridRow"},view:{name:"div",key:this.attrs[e]}};t.for("downcast").attributeToAttribute(s),t.for("upcast").attributeToAttribute(s)})),t.attributeToAttribute({model:"class",view:"class"})}_defineCommands(){this.editor.commands.add("insertUswdsGrid",new d(this.editor))}}var c=s("ckeditor5/src/ui.js");class u extends t.Plugin{init(){const{editor:t}=this,e=t.config.get("uswdsGrid");if(!e)return;const{dialogURL:s,openDialog:r,dialogSettings:o={}}=e;s&&"function"==typeof r&&t.ui.componentFactory.add("uswdsGrid",(e=>{const i=t.commands.get("insertUswdsGrid"),n=new c.ButtonView(e);return n.set({label:t.t("Uswds Grid"),icon:'<?xml version="1.0" standalone="yes"?>\n<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16">\n<path style="fill:#ffffff; stroke:none;" d="M0 0L0 16L16 16L16 0L0 0z"/>\n<path style="fill:#010101; stroke:none;" d="M1 3L1 6L10 6L10 3L1 3M11 3L11 6L15 6L15 3L11 3M1 7L1 10L5 10L5 7L1 7M6 7L6 10L10 10L10 7L6 7M11 7L11 10L15 10L15 7L11 7M1 11L1 14L15 14L15 11L1 11z"/>\n</svg>\n',tooltip:!0}),n.bind("isOn","isEnabled").to(i,"value","isEnabled"),this.listenTo(n,"execute",(()=>{r(s,(({settings:e})=>{t.execute("insertUswdsGrid",e)}),o)})),n}))}}class w extends t.Plugin{static get requires(){return[e.WidgetToolbarRepository]}static get pluginName(){return"UswdsGridToolbar"}init(){const{editor:e}=this,s=e.config.get("uswdsGrid");if(!s)return;const{dialogURL:r,openDialog:o,dialogSettings:n={}}=s;r&&"function"==typeof o&&e.ui.componentFactory.add("uswdsGridEdit",(s=>{const o=new c.ButtonView(s);return o.set({label:e.t("Edit Grid"),icon:t.icons.pencil,tooltip:!0,withText:!0}),this.listenTo(o,"execute",(()=>{let t={};const{selection:s}=e.editing.view.document,o=i(s);o&&(t=a(o),t.saved=1),this._openDialog(r,t,(({settings:t})=>{e.execute("insertUswdsGrid",t),e.editing.view.focus()}),n)})),o}))}afterInit(){const{editor:t}=this;t.plugins.get("WidgetToolbarRepository").register("uswdsGrid",{items:["uswdsGridEdit"],getRelatedElement:t=>i(t)})}_openDialog(t,e,s,r){const o=r.dialogClass?r.dialogClass.split(" "):[];o.push("ui-dialog--narrow"),r.dialogClass=o.join(" "),r.autoResize=window.matchMedia("(min-width: 600px)").matches,r.width="auto";Drupal.ajax({dialog:r,dialogType:"modal",selector:".ckeditor5-dialog-loading-link",url:t,progress:{type:"fullscreen"},submit:{editor_object:e}}).execute(),Drupal.ckeditor5.saveCallback=s}}class m extends t.Plugin{static get requires(){return[l,u,w]}static get pluginName(){return"UswdsGrid"}}const g={UswdsGrid:m}})(),r=r.default})()));